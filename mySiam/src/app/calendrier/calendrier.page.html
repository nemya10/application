<!--<ion-header>
  <ion-toolbar>
    <ion-title>
      {{ viewTitle }}
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="today()">Aujourd'hui</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>-->

<ion-content>

  <div *ngIf="showAddEvent" class="ion-padding">
    <ion-card>
      <ion-card-content>
        <ion-item>
          <ion-label>Jour</ion-label>
          <ion-label>Jour non jeûné </ion-label>
        </ion-item>
        <ion-item>

        <ion-label>Motif</ion-label>
        <ion-select [(ngModel)]="event.desc" ok-text="Save" cancel-text="Cancel">
          <ion-select-option value="Maladie (courte durée)">Maladie <br>(courte durée)</ion-select-option>
          <ion-select-option value="Maladie (longue durée donc irrattrapable)">Maladie <br>(longue durée donc irrattrapable)</ion-select-option>
          <ion-select-option value="Grossesse">Grossesse</ion-select-option>
          <ion-select-option value="Allaitement">Allaitement</ion-select-option>
          <ion-select-option value="Période de menstrue">période de menstrue</ion-select-option>
          <ion-select-option value="Voyage">Voyage</ion-select-option>
        </ion-select>
        </ion-item>
        <ion-item>
          <ion-label position="stacked"></ion-label>
          <ion-input tpye="text" [(ngModel)]="event.desc"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label>Date</ion-label>
          <ion-datetime displayFormat="DD/MM/YYYY " pickerFormat="MMM D:HH:mm" [(ngModel)]="event.startTime"
            display-timezone="utc" disabled></ion-datetime>
        </ion-item>

      </ion-card-content>
    </ion-card>
    <ion-button *ngIf="showAddEvent" icon-left size="medium" expand="full" shape="round" color="light" (click)="addEvent()" tappable>
      Ajouter
    </ion-button>
    <ion-fab vertical="bottom" horizontal="end" slot="fixed" >
      <ion-fab-button (click)="showHideForm()" >
        <ion-icon class="close" *ngIf="showAddEvent" name="close" ></ion-icon>
      </ion-fab-button>
    </ion-fab>

  </div>

  <div *ngIf="!showAddEvent" class="ion-padding">

    <div class="flex-row-C61RwL">
      <img class="logomy-siam-1-dXBp89" src="assets/logo.png" />
    </div>

    <ion-row>
      <ion-col size="1" ></ion-col>
      <ion-col size="1">
        <ion-button fill="clear" (click)="back()">
          <ion-icon name="arrow-back" slot="icon-only" style="color: aliceblue;"></ion-icon>
        </ion-button>
      </ion-col>
      <ion-col size="3"></ion-col>
      <ion-col size="1"></ion-col>
      <ion-col size="2"></ion-col>
      <ion-col size="1"></ion-col>
      <!-- Move forward one screen of the slides -->
      <ion-col size="1">
        <ion-button class="next" fill="clear" (click)="next()">
          <ion-icon name="arrow-forward" slot="icon-only"  style="color: aliceblue;"></ion-icon>
        </ion-button>
      </ion-col>
    </ion-row>


    <calendar id="myCal" [monthviewDisplayEventTemplate]="template"  [monthviewEventDetailTemplate]="template1"
      locale = "fr-FR" [eventSource]="eventSource" [calendarMode]="calendar.mode" [currentDate]="calendar.currentDate"
      (onEventSelected)="onEventSelected($event)" (onTitleChanged)="onViewTitleChanged($event)"
      (onTimeSelected)="onTimeSelected($event)" startHour="12" endHour="13" step="30" [startingDayMonth] = 1
      [format]="'YYYY-MM-DD'">
    </calendar>
  </div>

  <ng-template #template let-view="view" let-row="row" let-col="col">
    <div [class.with-event]="view.dates[row*7+col].events.length" style="color: aliceblue">
      {{view.dates[row*7+col].label}}
      <div class="indicator-container">
        <div class="event-indicator" *ngFor="let e of view.dates[row*7+col].events">
          <div class="ion-text-center">
            <ion-icon [ngStyle]="{'background-color': e.eventColor}" name="bulb-outline"></ion-icon>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <ion-fab *ngIf="showAddEvent" vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="showHideForm()">
      <ion-icon name="close"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  <ion-fab *ngIf="showEditEvent" vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="showHideFormEdit()">
      <ion-icon name="close"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <ng-template #template1 let-showEventDetail="showEventDetail" let-selectedDate="selectedDate"
    let-noEventsLabel="noEventsLabel">
    <div  *ngIf="showEventDetail">

    <ion-card *ngFor="let event of selectedDate?.events" (click)="onEventSelected(event)">
          <ion-card-header>
            <ion-card-title>{{event.title}}</ion-card-title>
          </ion-card-header>
        </ion-card>

        <ion-card *ngIf="selectedDate?.events.length==0 ">
          <ion-card-header>
            <ion-card-title>Pas d'évènement</ion-card-title>
          </ion-card-header>
        </ion-card>

      </div>


  <div>
    <ion-button icon-left size="medium" *ngIf="selectedDate?.events.length==0" expand="full" shape="round" color="light" (click)="openModal()" tappable>
      Ajouter
    </ion-button>

    <!--(click)="showHideForm()"-->

  </div>
  </ng-template>
</ion-content>
